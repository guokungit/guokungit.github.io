---
title: scp免密推送本地文件夹到远程服务器
date: 2025-08-01 17:26:16
tags: 工程化
categories: 前端
---

要实现 scp 命令不输入密码自动推送文件夹到远程服务器，核心是通过 SSH 密钥对认证 替代传统的密码认证。具体步骤如下：
步骤 1：在本地生成 SSH 密钥对
打开本地终端，执行以下命令生成密钥对（一路按回车默认即可，无需设置密码）：
```
ssh-keygen -t rsa
```
执行后会在 ~/.ssh/ 目录下生成两个文件：
id_rsa：私钥（本地保存，切勿泄露）
id_rsa.pub：公钥（需要上传到远程服务器）
步骤 2：将公钥上传到远程服务器
使用 ssh-copy-id 命令（最简单方式）将本地公钥复制到远程服务器：
```
ssh-copy-id root@192.168.1.35
```
替换 root@192.168.1.35 为你的远程服务器用户名和 IP
首次执行需要输入远程服务器的密码，后续无需再输
步骤 3：验证免密登录
执行以下命令测试是否能免密登录远程服务器：

```
ssh root@192.168.1.35
```
如果无需输入密码即可登录，说明配置成功。
步骤 4：使用 scp 免密推送文件夹
此时直接执行 scp 命令即可自动传输，无需输入密码：
bash
# 推送文件夹需要加 -r 参数
```
scp -r ./dist root@192.168.1.35:/data/orientation/
```
补充说明
如果远程服务器 SSH 端口不是默认的 22，需加上 -P 参数指定端口：
```
scp -r -P 2222 ./dist root@192.168.1.35:/data/orientation/
```
若没有 ssh-copy-id 命令，可手动复制公钥内容到远程服务器的 ~/.ssh/authorized_keys 文件中：
bash
# 本地终端执行，复制公钥内容
```
cat ~/.ssh/id_rsa.pub
```

# 登录远程服务器，将复制的内容追加到 authorized_keys
```
ssh root@192.168.1.35
mkdir -p ~/.ssh
echo "粘贴本地公钥内容" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```
配置完成后，scp 命令即可实现完全自动化的无密码文件传输。
